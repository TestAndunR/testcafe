{"EDITOR_STATE":{"allProjectFiles":{"914a2ac2-0774-4860-b0dc-237d0e81f2ca":{"id":"914a2ac2-0774-4860-b0dc-237d0e81f2ca","parent":null,"name":"testcafe","type":"DIRECTORY","isDirectory":true,"children":["1048109b-0bce-4d53-a9c6-6ce74fa26be2","461d0f09-0f4d-4d7a-9666-08f0b5c1be08"],"isRemovable":false,"filePath":"testcafe"},"1048109b-0bce-4d53-a9c6-6ce74fa26be2":{"id":"1048109b-0bce-4d53-a9c6-6ce74fa26be2","parent":"914a2ac2-0774-4860-b0dc-237d0e81f2ca","name":"lambda.js","type":"LAMBDA_FILE","isDirectory":false,"children":[],"isRemovable":true,"filePath":"testcafe/lambda.js","code":"let AWS = require('aws-sdk');\nlet connectionManager = require('./ConnectionManager');\nconst ddb = new AWS.DynamoDB.DocumentClient();\nconst cognito_idp = new AWS.CognitoIdentityServiceProvider();\nlet SL_AWS = require('slappforge-sdk-aws');\nconst rds = new SL_AWS.RDS(connectionManager);\n\nexports.handler = function (event, context, callback) {\n    cognito_idp.listUsers({\n        UserPoolId: process.env.UserPoolId_cognitoissueValidation,\n        Limit: \"10\"\n    }, function (error, data) {\n        if (error) {\n            // implement error handling logic here\n            throw error;\n        }\n        // your logic goes within this block\n    });\n\n\n    // You can pass the existing connection to this function.\n    // A new connection will be created if it's not present as the third param \n    // You must always end/destroy the DB connection after it's used\n    rds.query({\n        instanceIdentifier: 'issueValidate',\n        query: 'Insert into Persons(PersonID,LastName,FirstName,Address,City)Values(?,?,?,?,?)',\n        inserts: [0.Kannangara, Andun, Galle, Galle]\n    }, function (error, results, connection) {\n        if (error) {\n            console.log(\"Error occurred\");\n            throw error;\n        } else {\n            console.log(\"Success\")\n            console.log(results);\n        }\n\n        connection.end();\n    });\n\n\n    callback(null, 'Successfully executed');\n}","triggers":[{"resourceName":"apigusEast1TestAPIMyLambdapost","config":{}}],"config":{"memory":128,"timeout":60,"runtime":"nodejs8.10"},"testCases":{"4d1616e8-bfe3-41e4-997a-818ff149c958":{"id":"4d1616e8-bfe3-41e4-997a-818ff149c958","name":"Unnamed event","functionId":"1048109b-0bce-4d53-a9c6-6ce74fa26be2","event":"{\n    \"key1\": \"value1\",\n    \"key2\": \"value2\",\n    \"key3\": \"value3\"\n}"}}},"461d0f09-0f4d-4d7a-9666-08f0b5c1be08":{"id":"461d0f09-0f4d-4d7a-9666-08f0b5c1be08","parent":"914a2ac2-0774-4860-b0dc-237d0e81f2ca","name":"ConnectionManager.js","type":"JS_FILE","isDirectory":false,"children":[],"isRemovable":true,"filePath":"testcafe/ConnectionManager.js","code":"module.exports = function() {\n    this.dbConnections = [];\n\n    this.dbConnections[\"issueValidate\"] = {\n        host: process.env.EndPoint_rdsIssueValidate,\n        port: process.env.Port_rdsIssueValidate,\n        user: process.env.User_rdsIssueValidate,\n        password: process.env.Password_rdsIssueValidate,\n        database: \"issuevalidate\"\n    };\n};","triggers":[]}},"deletedFiles":[],"rootNode":"914a2ac2-0774-4860-b0dc-237d0e81f2ca","openFiles":["1048109b-0bce-4d53-a9c6-6ce74fa26be2"],"currentFileId":"1048109b-0bce-4d53-a9c6-6ce74fa26be2","resources":{"cognitoissueValidation":{"name":"cognitoissueValidation","type":"CognitoIdentityServiceProvider","config":{"mode":0,"name":"issueValidation","userPool":{"Name":"issue-validation","isNew":true,"AutoVerifiedAttributes":[],"AliasAttributes":[],"UsernameAttributes":[],"Policies":{"PasswordPolicy":{"MinimumLength":8,"RequireUppercase":true,"RequireLowercase":true,"RequireNumbers":true,"RequireSymbols":true}},"SchemaAttributes":[{"AttributeDataType":"String","DeveloperOnlyAttribute":false,"Mutable":false,"Name":"sub","Required":true},{"AttributeDataType":"String","DeveloperOnlyAttribute":false,"Mutable":true,"Name":"address","Required":false},{"AttributeDataType":"String","DeveloperOnlyAttribute":false,"Mutable":true,"Name":"birthdate","Required":false},{"AttributeDataType":"String","DeveloperOnlyAttribute":false,"Mutable":true,"Name":"email","Required":false},{"AttributeDataType":"String","DeveloperOnlyAttribute":false,"Mutable":true,"Name":"family_name","Required":false},{"AttributeDataType":"String","DeveloperOnlyAttribute":false,"Mutable":true,"Name":"gender","Required":false},{"AttributeDataType":"String","DeveloperOnlyAttribute":false,"Mutable":true,"Name":"given_name","Required":false},{"AttributeDataType":"String","DeveloperOnlyAttribute":false,"Mutable":true,"Name":"locale","Required":false},{"AttributeDataType":"String","DeveloperOnlyAttribute":false,"Mutable":true,"Name":"middle_name","Required":false},{"AttributeDataType":"String","DeveloperOnlyAttribute":false,"Mutable":true,"Name":"name","Required":false},{"AttributeDataType":"String","DeveloperOnlyAttribute":false,"Mutable":true,"Name":"nickname","Required":false},{"AttributeDataType":"String","DeveloperOnlyAttribute":false,"Mutable":true,"Name":"phone_number","Required":false},{"AttributeDataType":"String","DeveloperOnlyAttribute":false,"Mutable":true,"Name":"picture","Required":false},{"AttributeDataType":"String","DeveloperOnlyAttribute":false,"Mutable":true,"Name":"preferred_username","Required":false},{"AttributeDataType":"String","DeveloperOnlyAttribute":false,"Mutable":true,"Name":"profile","Required":false},{"AttributeDataType":"String","DeveloperOnlyAttribute":false,"Mutable":true,"Name":"timezone","Required":false},{"AttributeDataType":"Number","DeveloperOnlyAttribute":false,"Mutable":true,"Name":"updated_at","Required":false},{"AttributeDataType":"String","DeveloperOnlyAttribute":false,"Mutable":true,"Name":"website","Required":false}],"AdminCreateUserConfig":{"AllowAdminCreateUserOnly":false,"UnusedAccountValidityDays":7,"InviteMessageTemplate":{}}}},"globallyEditable":true},"apigusEast1TestAPIMyLambdapost":{"name":"apigusEast1TestAPIMyLambdapost","type":"API_GATEWAY","config":{"selectedRegion":"us-east-1","apiMode":1,"apiName":"TestAPI","apiId":"0itznun7w3","endpointType":"EDGE","rootResourceId":"h2lelj6j7k","existingResources":{"/project":"8mbcv6","/MyLambda":"98nqbj","/addResources":"b147rp","/validateIssue":"bwuz4h","/":"h2lelj6j7k","/socks":"vl5n4m"},"resourceMode":1,"resourcePath":"/MyLambda","resourceName":"MyLambda","resourceId":"98nqbj","restMethod":"POST","proxyIntegration":false,"enableCORS":false,"stageMode":1,"stageName":"Prod","stageDeploymentId":"x0cljq"},"globallyEditable":true},"rds-issueValidate":{"name":"rds-issueValidate","type":"RDS","config":{"editMode":false,"operation":0,"rdsInstance":{"rdsEngineType":"mysql","rdsEdition":"","rdsInstanceSpec":{"dbInstanceClass":"db.t2.micro","dbLicenseModel":"general-public-license","dbEngineVersion":"5.7.17"},"rdsSetting":{"instanceIdentifier":"issueValidate","masterUsername":"root","masterPassword":"12345678"},"rdsDBOptions":{"dbName":"issuevalidate","dbPort":"3306"},"rdsInstanceArn":"","Host":"","doesExist":false,"initializationQuery":"CREATE TABLE Persons (\n    PersonID int,\n    LastName varchar(255),\n    FirstName varchar(255),\n    Address varchar(255),\n    City varchar(255) \n);","alreadyDeployed":false},"rdsInstanceResources":[],"projectRegion":"us-east-1","mode":0,"additionalFiles":[],"params":{"query":"Insert into Persons(PersonID,LastName,FirstName,Address,City)Values(?,?,?,?,?)","inserts":"0.Kannangara,Andun,Galle,Galle"},"isGlobalEditMode":false,"enableInject":true,"isNewFromGlobal":false},"globallyEditable":true}},"envVariables":[{"lambdaId":"all","varKey":"SIGMA_AWS_ACC_ID","varValue":null,"shouldPersist":false,"displayOnly":false,"editable":false}],"packageJSON":{"dependencies":{"aws-sdk":{"name":"aws-sdk","version":"2.176.0","notRemovable":true},"slappforge-sdk-aws":{"name":"slappforge-sdk-aws","version":"0.0.5","notRemovable":false}}},"lambdaId":"1048109b-0bce-4d53-a9c6-6ce74fa26be2","additionalFiles":[{"content":"module.exports = function() {\n    this.dbConnections = [];\n\n    this.dbConnections[\"issueValidate\"] = {\n        host: process.env.EndPoint_rdsIssueValidate,\n        port: process.env.Port_rdsIssueValidate,\n        user: process.env.User_rdsIssueValidate,\n        password: process.env.Password_rdsIssueValidate,\n        database: \"issuevalidate\"\n    };\n};","filePath":"testcafe/ConnectionManager.js","fileName":"ConnectionManager.js","showFileOnSideBar":true}]},"PROJECT_META":{"projectName":"testcafe","projectDescription":"","projectVersion":"1.0.0","projectRegion":"us-east-1","lastSave":1536643250686},"VCS_STATE":{"provider":"GitHub","repo":{"name":"testcafe","url":"https://github.com/TestAndunR/testcafe"}}}